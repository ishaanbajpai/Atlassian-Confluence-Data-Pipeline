<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PL/SQL to Emery Hooks Conversion – Requirements Document</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 20px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        h1, h2, h3, h4, h5, h6 {
            margin-top: 1.5em;
            margin-bottom: 0.5em;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 1em 0;
            overflow-x: auto;
            display: block;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
        }
        th {
            background-color: #f2f2f2;
        }
        img {
            max-width: 100%;
            height: auto;
        }
        figure {
            text-align: center;
            margin: 1em 0;
        }
        figcaption {
            font-style: italic;
            font-size: 0.9em;
            margin-top: 0.5em;
        }
        pre {
            background-color: #f5f5f5;
            padding: 10px;
            overflow-x: auto;
            border-radius: 3px;
            white-space: pre;
            font-family: monospace;
        }
        code {
            font-family: monospace;
            background-color: #f5f5f5;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .code-block {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
            white-space: pre;
            font-family: monospace;
        }
        /* Syntax highlighting */
        .keyword { color: #0000ff; }
        .string { color: #a31515; }
        .comment { color: #008000; }
        .function { color: #795e26; }
        .number { color: #098658; }
        .type { color: #267f99; }
        .class { color: #267f99; }
        .variable { color: #001080; }
    </style>
</head>
<body>
    <h1>PL/SQL to Emery Hooks Conversion – Requirements Document</h1>
    <div class="content">
        <ac:structured-macro ac:local-id="265004d7-e960-42a2-9c94-f26f3649f9a8" ac:macro-id="155ea66b-0cbe-4fb2-bb25-4f83041db9a1" ac:name="toc" ac:schema-version="1" data-layout="default"><ac:parameter ac:name="style">none</ac:parameter></ac:structured-macro><h2>1. Background</h2><p>Emery (Groovy-based DSL) was introduced to localize workflow logic, improve XML processing, and enable upgrade safety. </p><h2>2. Goals</h2><ul><li><p><strong>Upgrade-safety</strong></p></li><li><p><strong>Modularity</strong>: Avoid cross-module DB access; ensure isolation.</p></li><li><p><strong>Performance</strong>: Replace XML-heavy PL/SQL logic with faster POJO-based processing.</p></li><li><p><strong>Security</strong>: Limit functionality to avoid unrestricted DB access.</p></li><li><p><strong>Maintainability</strong>: Support hook chaining and config-based customization.</p></li></ul><h2>3. <ac:inline-comment-marker ac:ref="727bf6cc-31a4-46ac-bbb9-ce5d5b5de147">Advantages</ac:inline-comment-marker></h2><ul><li><p><strong>Performance Boost</strong>: Significantly faster execution—large XML files that take 5+ minutes in PL/SQL process in seconds with Emery.</p></li><li><p><strong>Workflow Isolation</strong>: Hooks are strictly scoped to individual workflows or transitions, reducing cross-module interference.</p></li><li><p><strong>Hook Chaining</strong>: Enables clean separation between out-of-the-box (OOTB) logic and custom extensions.</p></li><li><p><strong>Simplified Deployment</strong>: Emery scripts are config-based and do not require recompiling database objects.</p></li><li><p><strong>Upgrade-Safe</strong>: Hook modularity allows smoother upgrade paths with minimal impact on custom logic.</p></li><li><p><strong>Database Agnostic</strong>: Emery maintains flexibility for future platform shifts away from Oracle.</p></li><li><p><strong>Code Isolation</strong>: Hooks are contained within their owning application—no cross-application access to components.</p></li></ul><h2>4. Limitations</h2><ul><li><p><strong>No </strong><code style="font-family: monospace; background-color: #f5f5f5; padding: 2px 4px; border-radius: 3px;">Operator support e.g. LIKE</code><strong>/Procedure Calls</strong>: Certain SQL ops and DB calls not supported.</p></li><li><p><strong>Minimal IDE Support</strong>: Lacks debugging, autocomplete, or validation.</p></li><li><p><strong>Case Sensitivity</strong>: Errors due to variable case mismatches.</p></li><li><p><strong>Learning Curve</strong>: Requires Groovy/Emery knowledge.</p></li></ul><h2>5. Key Concerns</h2><ul><li><p><strong>High Effort</strong>: Manual conversion is time intensive.</p></li><li><p><strong>Partial Migration Risk</strong>: Dual logic (PL/SQL + Emery) may add upgrade/test complexity.</p></li><li><p><strong>Tooling Gap</strong>: Syntax validation, test harnesses, and editor enhancements needed.</p></li><li><p><strong>ROI Doubt</strong>: Need to validate value vs. effort.</p></li></ul><h2>6. Use Cases</h2><ol start="1"><li><p><strong>Generic Conversion</strong>: Convert PL/SQL file → Emery hook.</p><ol start="1"><li><p>Convert a PL/SQL file/proc into an equivalent Emery hook.</p></li><li><p>Useful for bulk conversions or prototyping.</p></li><li><p>Initial tool versions may support limited syntax and flag unsupported parts for manual review.</p></li></ol></li><li><p><strong>Context-Aware Conversion</strong>:</p><ul><li><p>Users can:</p><ul><li><p>Select: <code style="font-family: monospace; background-color: #f5f5f5; padding: 2px 4px; border-radius: 3px;">Module → Workflows → Workflow</code> to define a new hook.</p></li><li><p>Select: <code style="font-family: monospace; background-color: #f5f5f5; padding: 2px 4px; border-radius: 3px;">Module → Workflows → Workflow → Transition / Submit Action / Custom Function</code> for targeted hook editing.</p></li><li><p>Fetch: From instance file system, load <code style="font-family: monospace; background-color: #f5f5f5; padding: 2px 4px; border-radius: 3px;">config.json</code> of the selected workflow and list all configured hooks (PL/SQL and Emery) in order.</p></li><li><p>Choose: A specific PL/SQL hook for conversion or an existing Emery hook for improvement or correction.</p></li></ul></li><li><p>Conversion scope is limited to generating Emery hooks only.</p></li></ul></li><li><p><strong>Editor Support</strong>:</p><ul><li><p>Provide a modern code editor with:</p><ul><li><p>Autocomplete for Emery DSL</p></li><li><p>Syntax highlighting and validation (including case-sensitivity, bracket matching, etc.)</p></li><li><p>Inline unit testing support</p></li><li><p>Log tracing for debugging</p></li></ul></li><li><p>Note: This functionality supports Emery hook creation and editing only (no PL/SQL generation).</p></li></ul></li></ol><hr/><h2>7. Action Items</h2><ac:task-list>
<ac:task>
<ac:task-id>1</ac:task-id>
<ac:task-uuid>1</ac:task-uuid>
<ac:task-status>incomplete</ac:task-status>
<ac:task-body><span class="placeholder-inline-tasks"><ac:link><ri:user ri:account-id="557058:8dfe13de-68c9-4fd0-bdf8-9ff5733368ae" ri:local-id="e1f020ba-7a79-4c54-82cf-b486dfb223f8"></ri:user></ac:link> : Identify unconverted PL/SQL and reasons by talking to other product members.</span></ac:task-body>
</ac:task>
<ac:task>
<ac:task-id>2</ac:task-id>
<ac:task-uuid>2</ac:task-uuid>
<ac:task-status>incomplete</ac:task-status>
<ac:task-body><span class="placeholder-inline-tasks"><ac:link><ri:user ri:account-id="557058:0a05779e-78ef-4828-9ca0-f85ec04cf848" ri:local-id="c71417fa-c347-4c8c-b3d6-dd7d538ef048"></ri:user></ac:link> : Fetch exceptions from LCNC documentation.</span></ac:task-body>
</ac:task>
</ac:task-list><hr/><h2>8. Final Decision</h2><p>The decision is to proceed with converting PL/SQL to Emery Hooks.</p><blockquote><p>Note: The Admin UX will support generation of Emery Hooks only. PL/SQL authoring will not be allowed through this interface.</p></blockquote><p><strong>Decision from:</strong> <ac:link><ri:user ri:account-id="557058:34d67cb3-ff77-4639-a5f2-09ef9cd53519" ri:local-id="381546ed-3e23-4faa-a010-491f3958d07d"></ri:user></ac:link> , <ac:link><ri:user ri:account-id="557058:78f556e3-2ee1-44e4-88c5-b26c2cf0e600" ri:local-id="15cec47e-585c-4c54-87a7-856e2da963c2"></ri:user></ac:link> </p><h2>Reference</h2><ol start="1"><li><p><ac:link><ri:page ri:content-title="Emery" ri:space-key="TPLAT" ri:version-at-save="35"></ri:page><ac:link-body>Emery - Team Platform - Confluence</ac:link-body></ac:link></p></li><li><p><ac:link ac:card-appearance="inline"><ri:page ri:content-title="Domain Specific Language (Emery) - Cookbook" ri:space-key="TPLAT" ri:version-at-save="51"></ri:page><ac:link-body>Domain Specific Language (Emery) - Cookbook</ac:link-body></ac:link> </p></li><li><p><ac:link><ri:page ri:content-title="DSL Based Groovy Hooks (Emery)" ri:space-key="TPLAT" ri:version-at-save="223"></ri:page><ac:link-body>DSL Based Groovy Hooks (Emery) - Team Platform - Confluence</ac:link-body></ac:link></p></li><li><p><ac:link><ri:page ri:content-title="Emery Client APIs" ri:space-key="TPLAT" ri:version-at-save="4"></ri:page><ac:link-body>Emery Client APIs - Team Platform - Confluence</ac:link-body></ac:link></p></li><li><p><ac:link><ri:page ri:content-title="Emery- Assignee, Parameter and Rule configurations" ri:space-key="TPLAT" ri:version-at-save="14"></ri:page><ac:link-body>Emery- Assignee, Parameter and Rule configurations - Team Platform - Confluence</ac:link-body></ac:link></p></li><li><p><ac:link><ri:page ri:content-title="Workflow - Emery conversion" ri:space-key="TPLAT" ri:version-at-save="7"></ri:page><ac:link-body>Workflow - Emery conversion - Team Platform - Confluence</ac:link-body></ac:link></p></li><li><p><ac:link><ri:page ri:content-title="Emery FAQ" ri:space-key="TPLAT" ri:version-at-save="1"></ri:page><ac:link-body>Emery FAQ - Team Platform - Confluence</ac:link-body></ac:link></p></li><li><p><ac:link><ri:page ri:content-title="Emery Overview" ri:space-key="TPT" ri:version-at-save="1"></ri:page><ac:link-body>Emery Overview - Technical Publications Team - Confluence</ac:link-body></ac:link></p></li><li><p>Reference from Diff Tool: <a data-card-appearance="inline" href="https://metricstream.atlassian.net/wiki/spaces/AR/pages/57790553/Upgrade+Tooling+-+Steps+to+follow+in+the+projects#:~:text=b)-,PLSQL%20to%20Emery%20Code%20Assistant,-%3A">https://metricstream.atlassian.net/wiki/spaces/AR/pages/57790553/Upgrade+Tooling+-+Steps+to+follow+in+the+projects#:~:text=b)-,PLSQL%20to%20Emery%20Code%20Assistant,-%3A</a> </p></li></ol>
    </div>
</body>
</html>